<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">



<title>
  
    1000+ 项目中出现最多的 10 个 JavaScript 错误（及如何避免）
  
</title>

<meta name="description" content="本文翻译自 Top 10 JavaScript errors from 1000+ projects (and how to avoid them) , 作者 JASON SKOWRONSKI, 翻译：Thomas Chan  为了回馈我们社区的开发者，我们查询了我们数据库上的上千个项目，找到了 10 个出现最多的 JavaScript 错误。本文将告诉你是什么造成了这些错误以及如何避免，避免这">
<meta property="og:type" content="article">
<meta property="og:title" content="1000+ 项目中出现最多的 10 个 JavaScript 错误（及如何避免）">
<meta property="og:url" content="http://chenjunhao.cn/2018/01/27/top-10-javascript-errors-and-how-to-avoid/">
<meta property="og:site_name" content="Memories">
<meta property="og:description" content="本文翻译自 Top 10 JavaScript errors from 1000+ projects (and how to avoid them) , 作者 JASON SKOWRONSKI, 翻译：Thomas Chan  为了回馈我们社区的开发者，我们查询了我们数据库上的上千个项目，找到了 10 个出现最多的 JavaScript 错误。本文将告诉你是什么造成了这些错误以及如何避免，避免这">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://chenjunhao.cn/assets/javascript-top10-errors.png">
<meta property="article:published_time" content="2018-01-27T03:35:01.000Z">
<meta property="article:modified_time" content="2022-11-26T09:18:06.861Z">
<meta property="article:tag" content="javascript">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://chenjunhao.cn/assets/javascript-top10-errors.png">




  <link rel="icon" href="/assets/favicon.jpeg">



<link rel="stylesheet" href="/perfect-scrollbar/css/perfect-scrollbar.min.css">


<link rel="stylesheet" href="/scripts/prism.css">


<link rel="stylesheet" href="/styles/main.css">





  <script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "//hm.baidu.com/hm.js?3c7748f8aa5ad8039215a1783a5c0ae5";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
  </script>



<meta name="generator" content="Hexo 5.4.2"></head>
<body
  
    class="monochrome"
  
  >
  <div class="mobile-header">
  <button class="sidebar-toggle" type="button">
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
  </button>
  <a class="title" href="/">Memories</a>
</div>

  <div class="main-container">
    <div class="sidebar-bg">
  <div class="sidebar">
    <div class="header">
      <h1 class="title"><a href="/">Memories</a></h1>
      
      <div class="info">
        <div class="content">
          
          
        </div>
        
          <div class="avatar">
            
              <a href="/resume"><img src="/assets/avator.jpeg"></a>
            
          </div>
        
      </div>
    </div>
    <div class="body">
      
        
          <ul class="nav">
            
              
                <li>
                  <a href="/" title="Home" external="false">Home</a>
                </li>
              
            
          </ul>
        
          <ul class="nav">
            
              
                <li>
                  <a href="/resume" title="About" external="false">About</a>
                </li>
              
            
              
                <li>
                  <a href="https://github.com/thomaschan" title="Github" target="_blank" rel="noopener">Github</a>
                </li>
              
            
              
                <li>
                  <a href="/something" title="Something" external="false">Something</a>
                </li>
              
            
          </ul>
        
          <ul class="nav">
            
              
                <li class="tag-list-container">
                  <a href="javascript:;" target="_self">标签</a>
                  <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/angularjs/" rel="tag">angularjs</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation/" rel="tag">animation</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/canvas/" rel="tag">canvas</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/d3-js/" rel="tag">d3.js</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/emotions/" rel="tag">emotions</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/graphql/" rel="tag">graphql</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html/" rel="tag">html</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/" rel="tag">javascript</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/project-management/" rel="tag">project management</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/reactjs/" rel="tag">reactjs</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/requirejs/" rel="tag">requirejs</a><span class="tag-list-count">1</span></li></ul>
                </li>
              
            
          </ul>
        
      
    </div>
  </div>
</div>

    <div class="main-content">
      <article id="post-top-10-javascript-errors-and-how-to-avoid" class="article article-type-post">
  
    <h1 class="article-header">
      1000+ 项目中出现最多的 10 个 JavaScript 错误（及如何避免）
    </h1>
  
  

  <div class="article-info">
    <span class="article-date">
  2018-01-27
</span>

    

    
	<span class="article-tag tagcloud">
		<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/" rel="tag">javascript</a></li></ul>
	</span>


  </div>
  <div class="article-entry">
    <blockquote>
<p>本文翻译自 <a target="_blank" rel="noopener" href="https://rollbar.com/blog/top-10-javascript-errors/">Top 10 JavaScript errors from 1000+ projects (and how to avoid them)</a> , 作者 JASON SKOWRONSKI, 翻译：<a href="http://chenjunhao.cn/">Thomas Chan</a></p>
</blockquote>
<p>为了回馈我们社区的开发者，我们查询了我们数据库上的上千个项目，找到了 10 个出现最多的 JavaScript 错误。本文将告诉你是什么造成了这些错误以及如何避免，避免这些错误将使你成为一个更好的开发者。</p>
<p>数据是王道，我们使用了精确的处理程序 <a target="_blank" rel="noopener" href="https://rollbar.com/error-tracking/javascript/">Rollbar</a> 收集并整理了出现最多的 10 个错误，Rollbar 会收集每个项目的所有错误，通过对<a target="_blank" rel="noopener" href="https://rollbar.com/docs/grouping-algorithm/">错误指纹</a>分组统计出每种错误出现的次数，分组会将重复的错误去重，查看起来相比一大堆日志的体验要好很多。</p>
<p>我们只关注那些影响你和你们公司的错误，所以我们按照不同公司的项目对出现的错误进行排名，如果只对错误数量进行排名的话可能有些错误跟大部分读者都没什么关系。</p>
<p>这是出现最多的 10 个错误：<br><img src="/assets/javascript-top10-errors.png" alt="Top 10 errors"><br>为了可读性已将每种错误摘出关键部分，让我们来深入看看什么会导致这些错误及如何避免。</p>
<h1 id="1-Uncaught-TypeError-Cannot-read-property-（无法读取属性）"><a href="#1-Uncaught-TypeError-Cannot-read-property-（无法读取属性）" class="headerlink" title="1. Uncaught TypeError: Cannot read property （无法读取属性）"></a>1. Uncaught TypeError: Cannot read property （无法读取属性）</h1><p>如果你是 JavaScript 开发者的话，这个错误你肯定已经见过很多次了。在 Chrome 里当从 undefined 或 null 读取属性或调用方法的时候会发生这个错误，你可以在 Chrome 开发者工具控制台测试一下：</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> foo<span class="token punctuation">;</span>
<span class="token comment">// undefined</span>
foo<span class="token punctuation">.</span>bar
<span class="token comment">// Uncaught TypeError: Cannot read property 'bar' of undefined</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>出现这个错有很多原因，通常情况下都是因为渲染页面时初始化数据不正确，我们来通过 React 的一个例子来看看如何复现这个错误（如果不正确的初始化数据，使用 Angular、Vue 等其他框架一样也会出现这个错误）。</p>
<pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">class</span> <span class="token class-name">Quiz</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">&#123;</span>
  <span class="token function">componentWillMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/thedata'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token literal-property property">items</span><span class="token operator">:</span> res<span class="token punctuation">.</span>data<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">&#123;</span>item<span class="token punctuation">.</span>id<span class="token punctuation">&#125;</span></span><span class="token punctuation">></span></span><span class="token punctuation">&#123;</span>item<span class="token punctuation">.</span>name<span class="token punctuation">&#125;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
        <span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>这儿有两个重点：(译者注：此处俩重点原文都写错了)</p>
<ol>
<li>组件的 state (即 <code>this.state</code>) 没有默认值，初始化是 <code>undefined</code></li>
<li>当异步请求的数据返回之前，组件至少会渲染一次，不管你是在 <code>constructor</code>, <code>componentWillMount</code> 还是 <code>componentDidMount</code> 去请求数据。当 <code>Quiz</code> 第一次渲染时，<code>this.state.items</code> 会直接报错 <code>Uncaught TypeError: Cannot read property &#39;items&#39; of undefined</code><br>这个错误很好修改，在 <code>constructor</code> 里给 <code>state</code> 初始化合适的值就好了：<pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">class</span> <span class="token class-name">Quiz</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">&#123;</span>
  <span class="token comment">// Added this:</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Assign state itself, and a default value for items</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
      <span class="token literal-property property">items</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>

  <span class="token function">componentWillMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/thedata'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token literal-property property">items</span><span class="token operator">:</span> res<span class="token punctuation">.</span>data<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">&#123;</span>item<span class="token punctuation">.</span>id<span class="token punctuation">&#125;</span></span><span class="token punctuation">></span></span><span class="token punctuation">&#123;</span>item<span class="token punctuation">.</span>name<span class="token punctuation">&#125;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
        <span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
你的代码可能与例子不尽相同，不过希望能给你提供点思路避免这个错误，如果没有请继续看看下面其他的错误。</li>
</ol>
<h1 id="2-TypeError-‘undefined’-is-not-an-object-evaluating-（undefined-不是一个对象）"><a href="#2-TypeError-‘undefined’-is-not-an-object-evaluating-（undefined-不是一个对象）" class="headerlink" title="2. TypeError: ‘undefined’ is not an object (evaluating （undefined 不是一个对象）"></a>2. TypeError: ‘undefined’ is not an object (evaluating （undefined 不是一个对象）</h1><p>这个错误与第一个错误是同一个错误，但是是出现在 Safari 浏览器里，且是从 <code>undefined</code> 上读取属性或方法，你可以在 Safari 开发者控制台测试下。</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> a
<span class="token comment">// undefined</span>
a<span class="token punctuation">.</span>b
<span class="token comment">// TypeError: undefined is not an object (evaluating 'a.b')</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h1 id="3-TypeError-null-is-not-an-object-evaluating-（null-不是一个对象）"><a href="#3-TypeError-null-is-not-an-object-evaluating-（null-不是一个对象）" class="headerlink" title="3. TypeError: null is not an object (evaluating （null 不是一个对象）"></a>3. TypeError: null is not an object (evaluating （null 不是一个对象）</h1><p>这个错误也与第一个错误相同，也是出现在 Safari 浏览器，且是从 <code>null</code> 上读取属性或方法。</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token comment">// undefined</span>
a<span class="token punctuation">.</span>b
<span class="token comment">// TypeError: null is not an object (evaluating 'a.b')</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>比较奇葩的是 JavaScript 里的 <code>null</code> 和 <code>undefined</code> 不是相等的，所以 Safari 抛了两种错误。</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">undefined</span> <span class="token operator">==</span> <span class="token keyword">null</span>
<span class="token comment">// true</span>
<span class="token keyword">undefined</span> <span class="token operator">===</span> <span class="token keyword">null</span>
<span class="token comment">// false</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>如果你还不太熟悉 null 与 undefined 的区别，可以看我之前的文章 <a href="http://chenjunhao.cn/2018/01/22/Null-vs-Undefined/">null vs undefined</a></p>
</blockquote>
<p>这个错误可能发生的场景之一是 DOM 还未加载完成，加载完成之前 DOM API 只会返回 <code>null</code>。所有处理 DOM 相关的 js 代码都应该在 DOM 加载完成之后执行，否则就有可能会出现这个错误。<br>像下面的例子，我们可以添加监听事件来通知我们页面加载完成了， <code>addEventListener</code> 触发时就可以调用 <code>init</code> 方法了。</p>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">function</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">var</span> myButton <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"myButton"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> myTextfield <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"myTextfield"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    myButton<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">var</span> userName <span class="token operator">=</span> myTextfield<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>
  document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'readystatechange'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token string">"complete"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>myTextfield<span class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Type your name<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>myButton<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Go<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h1 id="4-unknown-Script-error-（脚本错误）"><a href="#4-unknown-Script-error-（脚本错误）" class="headerlink" title="4. (unknown): Script error （脚本错误）"></a>4. (unknown): Script error （脚本错误）</h1><p>脚本错误通常是跨源脚本里未捕获的异常。比如你的 js 部署在 CDN 上，那 js 里没有被 try-catch 捕获的异常都会报 <code>Script Error</code> 而不是具体的错误信息，这是浏览器的跨源策略导致的。<br>可以通过以下方法拿到具体的报错信息：</p>
<h2 id="1-设置-Access-Control-Allow-Origin"><a href="#1-设置-Access-Control-Allow-Origin" class="headerlink" title="1. 设置 Access-Control-Allow-Origin"></a>1. 设置 <code>Access-Control-Allow-Origin</code></h2><p>将 <code>Access-Control-Allow-Origin</code> 设置为 <code>*</code>，即允许接收任何域名下的资源，你可以把 <code>*</code> 替换成你所需要的域名，比如 <code>Access-Control-Allow-Origin: www.example.com</code>，但是 <code>Access-Control-Allow-Origin</code> 是只能设置一个域名的，要设置多个域名是比较麻烦的（<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/1653308/access-control-allow-origin-multiple-origin-domains">参考这里</a>）。</p>
<h2 id="2-给-script-标签设置-crossorigin-”anonymous”-属性"><a href="#2-给-script-标签设置-crossorigin-”anonymous”-属性" class="headerlink" title="2. 给 script 标签设置 crossorigin=”anonymous” 属性"></a>2. 给 script 标签设置 crossorigin=”anonymous” 属性</h2><p>在你的 html 里给跨源的 script 设置 <code>crossorigin=&quot;anonymous&quot;</code> 属性，不过要先确定设置了 <code>Access-Control-Allow-Origin</code>，在 firefox 如果设置了 <code>crossorigin</code> 但是没设置 <code>Access-Control-Allow-Origin</code> 的话，该 js 脚本是不会执行的。</p>
<h1 id="5-TypeError-Object-doesn’t-support-property-（对象不支持的属性）"><a href="#5-TypeError-Object-doesn’t-support-property-（对象不支持的属性）" class="headerlink" title="5. TypeError: Object doesn’t support property （对象不支持的属性）"></a>5. TypeError: Object doesn’t support property （对象不支持的属性）</h1><p>在 IE 里调用一个不存在的函数时会出现这个错误，你可以在 IE 的开发者控制台测试一下：</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isAwesome</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// Object doesn't support property or method 'isAwesome'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>这个错误与 Chrome 里的 <code>TypeError: &#39;undefined&#39; is not a function</code> 是同一个，不过是不同浏览器之间的相同错误的错误信息不太一致。<br>IE 的一个毛病是没有正确处理命名空间，所以 99.9% 的情况下这个错误都是因为 IE 没有正确的绑定命名空间给 <code>this</code> 导致的。比如你有一个命名空间是 <code>Rollbar</code>，里边有一个方法是 <code>isAwesome</code>，通常你可以这么调用：</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isAwesome</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>Chrome，Firefox 和 Opera 都能正确处理，但是 IE 不会。所以保险起见还是使用命名空间的写法：</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">Rollbar<span class="token punctuation">.</span><span class="token function">isAwesome</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h1 id="6-TypeError-‘undefined’-is-not-function-（undefined-不是一个函数）"><a href="#6-TypeError-‘undefined’-is-not-function-（undefined-不是一个函数）" class="headerlink" title="6. TypeError: ‘undefined’ is not function （undefined 不是一个函数）"></a>6. TypeError: ‘undefined’ is not function （undefined 不是一个函数）</h1><p>这个错误是在 Chrome 里调用一个不存在的函数，你可以在 Chrome 和 Firefox 控制台测试一下：</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// Uncaught TypeError: this.foo is not a function</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>随着 js 编程技术这几年的成长，代码中出现了越来越多的自引用的回调和闭包函数，很容易造成 <code>this/that</code> 的混乱。<br>像这个例子：</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">testFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">clearLocalStorage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">clearBoard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// "this" 指向了谁？</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行上边的代码会报错：<code>Uncaught TypeError: undefined is not a function.</code>，原因是调用 <code>setTimeout()</code> 实际上是调用的 <code>window.setTimeout()</code>，传递给 <code>setTimeout()</code> 的匿名函数的上下文实际上是绑定在 <code>window</code> 上的，而 <code>window</code> 上是没有 <code>clearBoard()</code> 方法的。<br>兼容的写法是将 <code>this</code> 赋值给一个变量，然后在匿名函数里引用形成闭包。例如：</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">testFunction</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">clearLocalStorage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>   <span class="token comment">// 将 'this' 指向 self</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    self<span class="token punctuation">.</span><span class="token function">clearBoard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>或者在支持 <code>bind()</code> 方法的浏览器里可以通过 <code>bind()</code> 传递引用。</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">testFunction</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">clearLocalStorage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 绑定 'this'</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">testFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">clearBoard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 'this' 的上下文会绑定过来</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h1 id="7-Uncaught-RangeError-Maximum-call-stack-栈溢出"><a href="#7-Uncaught-RangeError-Maximum-call-stack-栈溢出" class="headerlink" title="7. Uncaught RangeError: Maximum call stack (栈溢出)"></a>7. Uncaught RangeError: Maximum call stack (栈溢出)</h1><p>在 Chrome 里有几种情况会出现这个错误，一种情况是递归没有被终止，你可以在 Chrome 开发者控制台测试一下：</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">recurse</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">recurse</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token function">recurse</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Uncaught RangeError: Maximum call stack size exceeded</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>还有一种情况是传给函数的参数超出范围了，有很多函数只接受特定范围的参数，比如 <code>Number.toExponential(digits)</code> 和 <code>Number.toFixed(digits)</code> 只接受 0 到 20 位的数字，<code>Number.toPrecision(digits)</code> 只接受 1 到 21 位的数字。</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">4294967295</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//OK</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//range error</span>

<span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">2.555555</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span><span class="token function">writeln</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span><span class="token function">toExponential</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//OK</span>
document<span class="token punctuation">.</span><span class="token function">writeln</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span><span class="token function">toExponential</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//range error!</span>

num <span class="token operator">=</span> <span class="token number">2.9999</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span><span class="token function">writeln</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//OK</span>
document<span class="token punctuation">.</span><span class="token function">writeln</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//range error!</span>

num <span class="token operator">=</span> <span class="token number">2.3456</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span><span class="token function">writeln</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span><span class="token function">toPrecision</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//OK</span>
document<span class="token punctuation">.</span><span class="token function">writeln</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span><span class="token function">toPrecision</span><span class="token punctuation">(</span><span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//range error!</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h1 id="8-TypeError-Cannot-read-property-‘length’（无法读取-length-属性）"><a href="#8-TypeError-Cannot-read-property-‘length’（无法读取-length-属性）" class="headerlink" title="8. TypeError: Cannot read property ‘length’（无法读取 length 属性）"></a>8. TypeError: Cannot read property ‘length’（无法读取 length 属性）</h1><p>在 Chrome 里读取变量值为 <code>undefined</code> 或 <code>null</code> 的 length 属性会报这个错误。</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> myButton <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
myButton<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
<span class="token comment">// UnCaught TypeError: Cannot read property 'length' of undefined</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>一般情况下是读取数组的长度，但是有时可能数组还没初始化或不在当前上下文，就会出现这个错。来看下边这个例子：</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> testArray<span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"Test"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">testFunction</span><span class="token punctuation">(</span><span class="token parameter">testArray</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> testArray<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>testArray<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token function">testFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>当你定义一个函数，且有一个参数，那这个参数就只存在于这个函数的作用域内，即使你有一个变量 <code>testArray</code> 跟参数名字一样。<br>有两个解决方法：</p>
<ol>
<li>不给函数设置参数：<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> testArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"Test"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">/* 前提: 在函数外定义 testArray 变量 */</span>
<span class="token keyword">function</span> <span class="token function">testFunction</span><span class="token punctuation">(</span><span class="token comment">/* No params */</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> testArray<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>testArray<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token function">testFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li>传递参数给函数<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> testArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"Test"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">testFunction</span><span class="token punctuation">(</span><span class="token parameter">testArray</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
   <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> testArray<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>testArray<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token function">testFunction</span><span class="token punctuation">(</span>testArray<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ol>
<h1 id="9-Uncaught-TypeError-Cannot-set-property（无法设置属性）"><a href="#9-Uncaught-TypeError-Cannot-set-property（无法设置属性）" class="headerlink" title="9. Uncaught TypeError: Cannot set property（无法设置属性）"></a>9. Uncaught TypeError: Cannot set property（无法设置属性）</h1><p>我们是无法读取和设置一个变量值为 <code>undefined</code> 或 <code>null</code> 的属性的，否则就会抛出 <code>Uncaught TypeError: cannot set property of undefined.</code>。<br>例如在 Chrome 里：</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> test <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
test<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token comment">// Uncaught TypeError: cannot set property 'value' of undefined</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>如果 <code>test</code> 对象不存在，就报这个错。</p>
<h1 id="10-ReferenceError-event-is-not-defined-event-没有声明"><a href="#10-ReferenceError-event-is-not-defined-event-没有声明" class="headerlink" title="10. ReferenceError: event is not defined (event 没有声明)"></a>10. ReferenceError: event is not defined (event 没有声明)</h1><p>这个错误是尝试访问一个不在当前作用域下的变量，或者变量未声明。简单的测试一下：</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">testFuncion</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">var</span> foo<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>如果你是在代码里处理浏览器事件(event)的时候遇到这个错误，确保你是把 event 作为参数传递给函数的。老浏览器比如 IE 有一个全局的 event，但并不是所有浏览器都有，jQuery 库倒是尝试提供了这个行为，不过最好还是传递 event 给函数比较好。</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">myFunction</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    event <span class="token operator">=</span> event<span class="token punctuation">.</span>which <span class="token operator">||</span> event<span class="token punctuation">.</span>keyCode<span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>keyCode<span class="token operator">===</span><span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
       <span class="token function">alert</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>keyCode<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>希望你通过这篇文章学到了点新东西，以后能尽量避免这些错误，或者正好解决了你的燃眉之急。不论如何，即使有最佳实践，在生产环境里还是有很多意料之外的错误。重要的是能找到那些具体的错误且能很快的解决它们。</p>

  </div>
  <footer class="article-footer">
    
  <div class="cc">
    <a href="http://creativecommons.org/licenses/by-sa/4.0/deed.z" target="_blank" title="署名-相同方式共享">
      <img src="/images/cc/cc.png">
      
          <img src="/images/cc/by.png">
        
          <img src="/images/cc/sa.png">
      
      <span>
        本作品采用知识共享 署名-相同方式共享 4.0 国际许可协议进行许可。
      </span>
    </a>
  </div>


    

  </footer>
</article>


  <img
    title="打开微信扫一扫"
    class="thankyou"
    src="/assets/thankyou.jpeg"
    style="width: 300px;margin: 20px auto;display: block;" />



  <div id="comments"></div>
  <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css" />
  <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
  <script>
    (function initComments() {
      var gitalk = new Gitalk({
        clientID: '1e2ae003530b581cd762',
        clientSecret: 'c144bbbb8c653b2c69c3082910b79abc86edfa4c',
        repo: 'ThomasChan.github.io',
        owner: 'thomaschan',
        admin: ['thomaschan'],
        // facebook-like distraction free mode
        distractionFreeMode: false,
        id: '2018012701',
        title: '2018012701',
      });

      gitalk.render('comments');
    })();
  </script>




      <div class="main-footer">
  
    © 2024 Memories - Powered by <a href="http://hexo.io" target="_blank">Hexo</a>
  
</div>

    </div>
  </div>
  
<script src="//apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>


  
<link rel="stylesheet" href="/PhotoSwipe/photoswipe.css">

  
<link rel="stylesheet" href="/PhotoSwipe/default-skin/default-skin.css">


  <!-- Root element of PhotoSwipe. Must have class pswp. -->
  <div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe.
             It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

      <!-- Container that holds slides.
                PhotoSwipe keeps only 3 of them in the DOM to save memory.
                Don't modify these 3 pswp__item elements, data is added later on. -->
      <div class="pswp__container">
        <div class="pswp__item"></div>
        <div class="pswp__item"></div>
        <div class="pswp__item"></div>
      </div>

      <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
      <div class="pswp__ui pswp__ui--hidden">

        <div class="pswp__top-bar">

          <!--  Controls are self-explanatory. Order can be changed. -->

          <div class="pswp__counter"></div>

          <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

          <button class="pswp__button pswp__button--share" title="Share"></button>

          <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

          <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

          <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
          <!-- element will get class pswp__preloader--active when preloader is running -->
          <div class="pswp__preloader">
            <div class="pswp__preloader__icn">
              <div class="pswp__preloader__cut">
                <div class="pswp__preloader__donut"></div>
              </div>
            </div>
          </div>
        </div>

        <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
          <div class="pswp__share-tooltip"></div>
        </div>

        <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>

        <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button>

        <div class="pswp__caption">
          <div class="pswp__caption__center"></div>
        </div>
      </div>
    </div>
  </div>

  
<script src="/PhotoSwipe/photoswipe.js"></script>

  
<script src="/PhotoSwipe/photoswipe-ui-default.js"></script>




<script src="/perfect-scrollbar/js/min/perfect-scrollbar.min.js"></script>


<script src="/scripts/prism.js"></script>


<script src="/scripts/main.js"></script>


</body>
</html>
